<launch>

  <arg name="save_dir" default="$(find vzense_demo)/data" />
  <arg name="launch_camera" default="true" />

  <group if="$(arg launch_camera)" >
    <include file="$(find vzense_demo)/launch/vzense.launch" >
      <arg name="gui" value="false" />
    </include>
  </group>

  <node name="save_request_node"
        pkg="vzense_demo" type="save_request_node.py"
        clear_params="true" output="screen" >
  </node>

  <node name="data_collection_server"
        pkg="jsk_data" type="data_collection_server.py"
        clear_params="true" output="screen" >
    <rosparam subst_value="true">
      save_dir: $(arg save_dir)
      topics:
      - name: /camera/right_vzense_camera/color/image_raw
        msg_class: sensor_msgs/Image
        fname: right.jpg
        savetype: ColorImage
      - name: /camera/left_vzense_camera/color/image_raw
        msg_class: sensor_msgs/Image
        fname: left.jpg
        savetype: ColorImage
    </rosparam>
  </node>



  <node name="rviz"
        pkg="rviz" type="rviz"
        args="-d $(find vzense_demo)/launch/config/calib_camera.rviz" >
    <rosparam command="load" file="$(find vzense_demo)/config/calib_camera_command.yaml" />
  </node>

</launch>
